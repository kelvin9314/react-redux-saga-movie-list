(this["webpackJsonpreact-redux-saga-movie-list"]=this["webpackJsonpreact-redux-saga-movie-list"]||[]).push([[0],{250:function(e,t,n){},251:function(e,t,n){},252:function(e,t,n){},253:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(27),o=n.n(a),i=n(7),u=n(6),s=n(92),l=n.n(s),v=n(94),d="COUNTER_ADD",m="COUNTER_RESET",f={LOAD:"MOVIES_LOAD",LOAD_SUCCESS:"MOVIES_LOAD_SUCCESS",LOAD_FAIL:"MOVIES_LOAD_FAIL"},p={amount:0,name:"kelvin"},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:case m:return{amount:t.count};default:return e}},g=n(44),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.type===f.LOAD_SUCCESS?[].concat(Object(g.a)(e),Object(g.a)(t.movies)):e},E=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOAD:return!0;case f.LOAD_SUCCESS:case f.LOAD_FAIL:return!1;default:return e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOAD_FAIL:return t.err;case f.LOAD:case f.LOAD_SUCCESS:return null;default:return e}},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.LOAD_SUCCESS:return e+1;default:return e}},L=Object(u.c)({counter:O,movies:h,isLoading:E,error:b,nextPage:A}),S=n(13),w=n.n(S),D=n(18),_=n(93),j=n.n(_),x=function(e){var t;return w.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.a.awrap(j.a.get("".concat("https://api.themoviedb.org/3/movie","/now_playing?api_key=").concat("468ec7dede9b1c236239f9e0ab93d02f","&language=zh-TW&page=").concat(e)));case 3:return t=n.sent,n.abrupt("return",t);case 7:throw n.prev=7,n.t0=n.catch(0),n.t0;case 10:case"end":return n.stop()}}),null,null,[[0,7]])},y=function(){return{type:f.LOAD}},C=function(e){return{type:f.LOAD_SUCCESS,movies:e}},I=function(e){return{type:f.LOAD_FAIL,err:e}},U=w.a.mark(N),k=w.a.mark(T),F=function(e){return e.nextPage};function N(){var e,t,n;return w.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(D.c)(F);case 3:return e=r.sent,console.log("page : ".concat(e)),r.next=7,Object(D.a)(x,e);case 7:return t=r.sent,n=t.data,r.next=11,Object(D.b)(C(n.results));case 11:r.next=18;break;case 13:return r.prev=13,r.t0=r.catch(0),console.log(r.t0.toString()),r.next=18,Object(D.b)(I(r.t0.toString()));case 18:case"end":return r.stop()}}),U,null,[[0,13]])}function T(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(D.d)(f.LOAD,N);case 2:case"end":return e.stop()}}),k)}var M=T,R=(n(250),n(251),function(e){var t=e.movie;return c.a.createElement("div",{className:"card-container"},c.a.createElement("img",{alt:t.title,width:"100%",src:"https://image.tmdb.org/t/p/w500/".concat(t.poster_path)}),c.a.createElement("h3",{style:{textAlign:"center"}},t.title),c.a.createElement("span",{style:{textAlign:"center"}},t.release_date))}),V=(n(252),function(e){var t=e.movies;return c.a.createElement("div",{className:"card-list"},t.map((function(e){return c.a.createElement(R,{key:e.id,movie:e})})))}),H=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.movies})),n=Object(i.c)((function(e){return e.error})),a=Object(i.c)((function(e){return e.isLoading})),o=function(){var t=window.innerHeight+document.documentElement.scrollTop;console.log("current: ".concat(t));var n=document.documentElement.offsetHeight;console.log("height: ".concat(n)),t<n||a||(console.log("Fetch more list items!"),e(y()))};Object(r.useEffect)((function(){e(y())}),[e]),Object(r.useEffect)((function(){return window.addEventListener("scroll",o),function(){return window.removeEventListener("scroll",o)}}),[o]);return c.a.createElement("div",{className:"App"},c.a.createElement("h1",{style:{textAlign:"center"}}," Movie list (Data from themoviedb) "),c.a.createElement(V,{movies:t}),n&&c.a.createElement("h2",null,n))},J=Object(v.a)(),P=Object(u.e)(L,Object(u.d)(Object(u.a)(J),l()()));J.run(M);var z=document.getElementById("root");o.a.render(c.a.createElement((function(){return c.a.createElement(i.a,{store:P},c.a.createElement(H,null))}),null),z)},95:function(e,t,n){e.exports=n(253)}},[[95,1,2]]]);
//# sourceMappingURL=main.46922658.chunk.js.map